# RPG Maker MV 任务系统插件
## 一、插件简介
本插件为 RPG Maker MV 提供功能丰富的任务管理系统，支持滚动查看任务列表及底部提示功能，可实现任务的添加、完成控制、状态展示，以及基于任务状态的地图行进限制等操作。

## 二、效果展示
![img.png](ReadMeImg/img.png)
![img_1.png](ReadMeImg/img_1.png)
![img_2.png](ReadMeImg/img_2.png)
![img_3.png](ReadMeImg/img_3.png)
![img_4.png](ReadMeImg/img_4.png)

## 三、核心功能
- **任务状态可视化**：实时展示任务列表、完成进度及奖励信息，支持窗口折叠/展开，任务数量超出窗口高度时可滚动查看。
- **多样化任务类型**：
   - 主线任务：玩家不可拒绝，自动加入任务列表。
   - 普通任务：玩家可选择是否接取。
- **灵活的任务指令**：通过插件命令完成任务添加、标记完成、奖励发放，以及设置未完成任务时的地图行进限制。
- **便捷的交互操作**：支持鼠标滚轮、键盘方向键滚动任务列表，未显示全部内容时底部显示倒三角提示。

## 四、安装步骤
1. **文件放置**：下载 `TaskSystem.js` 插件文件，复制到 RPG Maker MV 项目的 `js/plugins` 目录下。
2. **插件启用**：打开 RPG Maker MV，在「插件管理器」中找到该插件并勾选启用。

## 五、插件命令详解
### 命令类型及格式说明
| 命令类型      | 完整格式示例                                                                        | 功能说明                                    |
|-----------|-------------------------------------------------------------------------------|-----------------------------------------|
| 完成任务      | `FinishTask /n [任务名称] /g [奖励金额] /i [物品编号] [数量] /w [武器编号] [数量] /a [护甲编号] [数量]` | 标记任务为完成状态，可同时发放金币、物品、武器、护甲等奖励（奖励参数可省略）。 |
| 添加主线任务    | `AddMainTask /n [任务名称] /c [任务内容] /r [奖励内容介绍]`                                 | 添加玩家不可拒绝的主线任务，自动加入任务列表，包含任务名称、内容及奖励说明。  |
| 添加普通任务    | `AddNormalTask /n [任务名称] /c [任务内容] /r [奖励内容介绍]`                               | 添加可选择拒绝的支线任务，玩家可自主决定是否接取，包含完整任务信息。      |
| 任务未完成禁止行进 | `RefuseIfNotFinish [任务名称]`                                                    | 在方格事件中设置限制：若指定任务未完成，玩家无法到达该方格。          |

### 命令参数说明
- **通用参数等价形式**：
   - `/n` 可替换为 `/name` 或 `/任务名称`
   - `/c` 可替换为 `/context` 或 `/任务内容`
   - `/r` 可替换为 `/reward` 或 `/奖励内容`
- **完成任务命令专属参数**：
   - `/g` 可替换为 `/gold` 或 `/金币`（奖励金额，数字类型）
   - `/i` 可替换为 `/item` 或 `/物品`（奖励物品编号，后跟数量）
   - `/w` 可替换为 `/weapon` 或 `/武器`（奖励武器编号，后跟数量）
   - `/a` 可替换为 `/armor` 或 `/护甲`（奖励护甲编号，后跟数量）

### 使用示例
- 完成任务并发放 1000 金币：`FinishTask /n "收集木材" /g 1000`
- 添加主线任务：`AddMainTask /n "拯救王国" /c "前往城堡击败恶龙" /r "金币×5000 + 圣剑"`
- 设置行进限制：`RefuseIfNotFinish "拯救王国"`

## 六、使用指南
1. **任务窗口操作**：按键盘 `T` 键快速打开/折叠任务列表窗口。
2. **列表滚动方式**：
   - 鼠标滚轮：上下滚动查看超出窗口高度的任务内容。
   - 键盘方向键：按 `↑`/`↓` 键逐行滚动。
3. **滚动提示**：当窗口未显示全部任务时，底部会显示倒三角图标（▼），提示可继续向下滚动。

## 七、注意事项
- **任务名称唯一性**：每个任务的名称必须唯一，避免因名称重复导致指令执行异常。
- **参数格式要求**：
   - 任务名称或内容中包含空格时，需用双引号（""）括起，例如：`AddNormalTask /n "探索神秘洞穴" /c "寻找失落的宝藏"`。
   - 命令参数可调整顺序，但建议按规范格式输入以确保兼容性（如 `/n` 参数优先放置）。
- **奖励发放扩展**：若需添加插件命令未涵盖的奖励类型（如技能、状态等），可在事件中自行添加对应指令。